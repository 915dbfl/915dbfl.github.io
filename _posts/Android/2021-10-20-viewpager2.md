---
title: "[Android] ViewPager2 ì‚¬ìš©í•˜ê¸°"
excerpt: "viewpager2 ì‚¬ìš©ë²•"
categories:
  - Android
tag:
  - android 
  - viewpager
  - viewpager2
  - andoird viewpager2
  - kotlin
  - kotlin viewpager2

last_modified_at: 2021-11-24
toc: true
toc_sticky: true
search: true
---

## Intro
ğŸ‘© ì´ë²ˆ ì‹œê°„ì—ëŠ” **ViewPager2ì´ë€ ë¬´ì—‡**ì´ê³ , ê¸°ì¡´ì— ì¡´ì¬í–ˆë˜ **ViewPagerí•˜ê³ ëŠ” ë¬´ìŠ¨ ì°¨ì´**ê°€ ì¡´ì¬í•˜ëŠ”ì§€ì— ì¤‘ì ì„ ë‘ì–´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ìš°ì„  ViewPagerë€, ViewPager2ë€ ë¬´ì—‡ì¸ì§€ ì •í™•íˆ ì´í•´í•˜ê³  ë„˜ì–´ê°€ì!!

<br>

## ğŸ™‹â€â™€ï¸ ViewPagerì´ë€?
* [ì•ˆë“œë¡œì´ë“œ ê³µì‹ í™ˆí˜ì´ì§€](https://developer.android.com/training/animation/screen-slide?hl=ko)ì—ì„œ ViewPagerëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ë©ë‹ˆë‹¤.

> í™”ë©´ ìŠ¬ë¼ì´ë“œëŠ” **í•˜ë‚˜ì˜ ì „ì²´ í™”ë©´ì—ì„œ ë‹¤ë¥¸ í™”ë©´ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ê²ƒ**ìœ¼ë¡œ, ì„¤ì • ë§ˆë²•ì‚¬ ë˜ëŠ” ìŠ¬ë¼ì´ë“œì‡¼ì™€ ê°™ì€ UIì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.  
> **ViewPager** ê°ì²´ëŠ” **í™”ë©´ ìŠ¬ë¼ì´ë“œ**ì— ìë™ìœ¼ë¡œ **ì• ë‹ˆë©”ì´ì…˜**ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

## ğŸ™‹ ViewPager vs ViewPager2
ğŸ‘© ê·¸ë ‡ë‹¤ë©´ ViewPagerì™€ ViewPager2ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ? 

ìš°ì„  ViewPager2ê°€ ë¬´ì—‡ì¸ì§€ë¶€í„° ì‚´í´ë³´ì!

* [ì•ˆë“œë¡œì´ë“œ ê³µì‹ í™ˆí˜ì´ì§€](https://developer.android.com/training/animation/vp2-migration?hl=ko)ì—ì„œ ì •ì˜í•œ ViewPager2ë¥¼ ì‚´í´ë³´ì.

> ViewPager2ëŠ” ViewPager ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê°œì„ ëœ ë²„ì „ìœ¼ë¡œ, í–¥ìƒëœ ê¸°ëŠ¥ì„ ì œê³µí•˜ë©° ViewPager ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•©ë‹ˆë‹¤.

ê·¸ë ‡ë‹¤ë©´ viewpager2ë¡œ ì´ì „í–ˆì„ ê²½ìš°, ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ë¬´ì—‡ì¼ê¹Œ?

* ê¸°ì¡´ ê°€ë¡œ í˜ì´ì§•ì€ ë¬¼ë¡  **ì„¸ë¡œ í˜ì´ì§•**ë„ ì§€ì›í•œë‹¤.
  * **andoird:orientation ì†ì„±**ì„ ì„¤ì •í•˜ì—¬ ViewPager2 ìš”ì†Œì˜ ì„¸ë¡œ í˜ì´ì§•ì„ ì‚¬ìš© ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


* ì˜¤ë¥¸ìª½ì—ì„œ ì™¼ìª½ í˜ì´ì§•ì„ ì§€ì›í•œë‹¤.

* **ìˆ˜ì • ê°€ëŠ¥í•œ** í”„ë˜ê·¸ë¨¼íŠ¸ ì»¬ë ‰ì…˜ì„ í†µí•´ í˜ì´ì§•ì„ ì§€ì›í•œë‹¤.
  * ê¸°ë³¸ ì»¬ë ‰ì…˜ì´ ë³€ê²½ë˜ë©´ **notifyDatasetChanged()**ë¥¼ í˜¸ì¶œí•´ UIë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

<br>

## ğŸ™‹â€â™€ï¸ ViewPager2 ì‚¬ìš©ë²•

ğŸ‘© ê·¸ë ‡ë‹¤ë©´ ë³¸ê²©ì ìœ¼ë¡œ ViewPager2 ì‚¬ìš©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

---
### ğŸ‘©â€ğŸ’» AndroidX ì¢…ì† í•­ëª© ì¶”ê°€
* viewpager2ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œì íŠ¸ì˜ **build.gradle íŒŒì¼**ì— ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ì„œ **AndroidX ì¢…ì† í•­ëª©ì„ ì¶”ê°€**í•´ì•¼ í•œë‹¤.
```
dependencies {
    implementation("androidx.viewpager2:viewpager2:1.0.0")
}
```

ê·¸ë ‡ë‹¤ë©´ viewpager2ì˜ ì‚¬ìš© ì¤€ë¹„ëŠ” ë§ˆì¹œ ê²ƒì´ë‹¤.

---

### ğŸ‘©â€ğŸ’» ë™ì¼ ìš”ì†Œë¡œ êµ¬ì„± vs ì„œë¡œ ë‹¤ë¥¸ í”„ë˜ê·¸ë¨¼íŠ¸ë¡œ êµ¬ì„±

ğŸ‘© viewpager2ì˜ êµ¬í˜„ì€ ìŠ¬ë¼ì´ë“œë¥¼ ì§„í–‰í•  ìš”ì†Œì— ë”°ë¼ì„œ ë‘ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.

* **ë·°**ë¥¼ í†µí•´ í˜ì´ì§• - **RecyclerView.Adapter** ì‚¬ìš©
* **í”„ë˜ê·¸ë¨¼íŠ¸**ë¥¼ í†µí•´ í˜ì´ì§• - **FragmentStateAdapter** ì‚¬ìš©
  * ì •í•´ì§„ ì†Œìˆ˜ì˜ í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ í†µí•´ í˜ì´ì§•í•  ê²½ìš° í¬í•¨
  * ë§ì€ ìˆ˜, ì•Œ ìˆ˜ ì—†ëŠ” ìˆ˜ì˜ í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ í†µí•´ í˜ì´ì§•í•  ê²½ìš° í¬í•¨

í•„ìì˜ ê²½ìš°, <u>í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ ë¥¼ í†µí•´ í˜ì´ì§•</u>í•  ê²ƒì´ë¯€ë¡œ  FragmentStateAdapterë¥¼ ì‚¬ìš©í•´ viewpager2ë¥¼ êµ¬í˜„í•  ê²ƒì´ë‹¤!


## ğŸ™‹â€â™€ï¸ activity.xml
ìš°ì„  viewpager2ê°€ ìœ„ì¹˜í•œ activity.xmlì„ êµ¬ì„±í•  ê²ƒì´ë‹¤.
```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <androidx.viewpager2.widget.ViewPager2
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        //ì„¸ë¡œ í˜ì´ì§• ì„¤ì •
        android:orientation="vertical"
        android:id="@+id/viewpager2"/>
</LinearLayout>
```

í•´ë‹¹ ì½”ë“œëŠ” ê°„ë‹¨í•˜ë¯€ë¡œ ì¶”ê°€ ì„¤ëª…ì„ ì§„í–‰í•˜ì§€ ì•Šê² ë‹¤.

## ğŸ™‹â€â™€ï¸ Fragment êµ¬ì„±
ğŸ‘© ì§€ê¸ˆë¶€í„°ëŠ” ì—¬ëŸ¬ Fragmentì˜ ê¸°ë³¸ì´ ë  í•˜ë‚˜ì˜ **Fragment**ë¥¼ êµ¬ì„±í•  ê²ƒì´ë‹¤.
  * í•´ë‹¹ Fragmentë¥¼ ìˆ˜ì •í•˜ì—¬ **ì„œë¡œ ë‹¤ë¥¸ Fragmentë¡œ ë§Œë“  í›„ ìŠ¬ë¼ì´ë“œ ì‹œí‚¬ ê²ƒì´ë‹¤.**

> **base_fragment.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">

    <TextView
        android:textSize="50dp"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="First Fragment"/>

</LinearLayout>
```

* ê°„ë‹¨í•˜ê²Œ í•˜ë‚˜ì˜ textviewë¡œ í™”ë©´ì„ êµ¬ì„±í–ˆë‹¤.
* ì„œë¡œ ë‹¤ë¥¸ fragmentëŠ” ë°°ê²½ìƒ‰ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.

<br>

> **BaseFragment.kt**

```
class BaseFragment(order: Int) : Fragment() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        val idx = order
    }

    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        return inflater.inflate(R.layout.base_fragment, container, false)
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
      // ìŠ¬ë¼ì´ë“œ ìˆœì„œì— ë”°ë¼ í™”ë©´ì˜ ìƒ‰ê³¼ textë¥¼ ë‹¬ë¦¬ í•˜ì˜€ë‹¤.
        if(idx == 1){
            view.setBackgroundColor(Color.parseColor("#9FC93C"))
            view.findViewById<TextView>(R.id.frag_text).setText("Frist Fragment")
        }else if(idx == 2){
            view.setBackgroundColor(Color.parseColor("#3DB7CC"))
            view.findViewById<TextView>(R.id.frag_text).setText("Second Fragment")
        }else{
            view.setBackgroundColor(Color.parseColor("#CC723D"))
            view.findViewById<TextView>(R.id.frag_text).setText("Third Fragment")
        }
    }
}
```

ğŸ‘© í”„ë˜ê·¸ë¨¼íŠ¸ êµ¬í˜„ ì‹œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ ì„¸ê°€ì§€ì— ëŒ€í•´ ê°„ë‹¨íˆ ì•Œì•„ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
* **onCreate()**
  * í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ **ìƒì„±**í•  ë•Œ ì‹œìŠ¤í…œì—ì„œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜
  * í”„ë˜ê·¸ë¨¼íŠ¸ê°€ ì¤‘ë‹¨ë˜ê³  ë‹¤ì‹œ ì¬ê°œë˜ì—ˆì„ ëŒ€, ìœ ì§€í•˜ê³ ì í•˜ëŠ” ê²ƒì„ **ì´ˆê¸°í™”**
    * ex) bundle data ê°€ì ¸ì˜¤ê¸° ë“±..

* **onCreateView()**
  * í”„ë˜ê·¸ë¨¼íŠ¸ê°€ **UIë¥¼ ì²˜ìŒìœ¼ë¡œ ê·¸ë¦´ ë•Œ** ì‹œìŠ¤í…œì—ì„œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜
  * UIë¥¼ ê·¸ë¦° í›„, **Viewë¥¼ ë°˜í™˜**í•˜ê²Œ ëœë‹¤.
  * í•´ë‹¹ í”„ë˜ê·¸ë¨¼íŠ¸ê°€ UIë¥¼ ì œê³µí•˜ì§€ ì•Šì„ ê²½ìš°, nullì„ ë°˜í™˜í•œë‹¤.

* **onViewCreated()**
  * onCreateViewì—ì„œ returní•œ viewë¥¼ ê°€ì§€ê³  ìˆëŠ”ë‹¤.
  * **viewì˜ ë‹¤ì–‘í•œ ìš”ì†Œë“¤ì„ ìˆ˜ì •ê°€ëŠ¥í•˜ë‹¤.**


## ğŸ™‹â€â™€ï¸ViewPager2ì˜ Adapter êµ¬í˜„
ğŸ‘© í•„ìì˜ ê²½ìš°, ìœ„ì—ì„œ ì„¤ëª…í–ˆë“¯ì´ **í”„ë˜ê·¸ë¨¼íŠ¸ í˜ì´ì§•**ì„ ì§„í–‰í•  ê²ƒì´ë¯€ë¡œ **FragmentStateAdapter**ë¥¼ í†µí•´ì„œ ViewPager2ì˜ Adpaterë¥¼ êµ¬í˜„í•  ê²ƒì´ë‹¤.

```
class ViewPager2Adapter(fragmentActivity: FragmentActivity): FragmentStateAdapter(fragmentActivity) {
    var fragList: ArrayList<Fragment> = ArrayList()
    // ì–´ëŒ‘í„°ì—ì„œ ë§Œë“¤ í˜ì´ì§€ ìˆ˜ ë°˜í™˜(í•„ìˆ˜ êµ¬í˜„)
    override fun getItemCount(): Int {
        return fragList.size
    }

    //ScreenSlidePageFragmentì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆ í˜ì´ì§€ë¡œ ì œê³µí•˜ëŠ” í•¨ìˆ˜(í•„ìˆ˜ êµ¬í˜„)
    override fun createFragment(position: Int): Fragment {
        return fragList[position]
    }

    // ìƒˆë¡œìš´ Fragmentë¥¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
    fun addFragment(fragment: Fragment){
        fragList.add(fragment)
        notifyItemInserted(fragList.size-1)
    }
}
```

## ğŸ™‹â€â™€ï¸ ViewPager2Activity.kt
ğŸ‘© ì´ì œ ë‚¨ì€ ê³¼ì •ì€ ìœ„ì—ì„œ êµ¬í˜„í•œ ViewPager2Adapterë¥¼ viewpager2ì— ì„¤ì •í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

```
class ViewPager2Activity : AppCompatActivity(){
    lateinit var binding: Viewpager2ActivityBinding
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = Viewpager2ActivityBinding.inflate(layoutInflater)
        var root = binding.root
        setContentView(root)

        val viewPager2Adapter = ViewPager2Adapter(this)
        //ì„¸ ê°œì˜ Fragment ì¶”ê°€
        viewPager2Adapter.addFragment(BaseFragment(1))
        viewPager2Adapter.addFragment(BaseFragment(2))
        viewPager2Adapter.addFragment(BaseFragment(3))
        //viewpager2ì— adapter ì„¤ì •
        binding.viewpager2.adapter = viewPager2Adapter
    }
}
```

## ğŸ™‹â€â™€ï¸ ê²°ê³¼
ğŸ‘© ì—¬ê¸°ê¹Œì§€ ì§„í–‰í–ˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

<img src="https://ifh.cc/g/VeaRJL.gif" width = 300 height = 350>

ê·¸ ê³¼ì •ì„ ì •í™•íˆ ì´í•´í•˜ê³  ë”°ë¼ê°„ë‹¤ë©´
ìƒê°ë³´ë‹¤ êµ¬í˜„ì´ ê·¸ë¦¬ ë³µì¡í•˜ì§€ ì•Šë‹¤ê³  ëŠë‚„ ê²ƒì´ë‹¤!!:)

ê·¸ë ‡ë‹¤ë©´ ì´ë²ˆ ê²Œì‹œê¸€ì€ ì—¬ê¸°ì„œ ì´ë§Œ ë§ˆë¬´ë¦¬í•˜ê² ë‹¤!!

ë~ ~(Ë˜â–¾Ë˜~)

<br>

## âœ GIT REPO
* [https://github.com/915dbfl/youlAndroid](https://github.com/915dbfl/youlAndroid)

<br>

## ğŸ“ƒì°¸ê³ 
* <https://developer.android.com/training/animation/screen-slide?hl=ko>
* <https://developer.android.com/training/animation/vp2-migration?hl=ko>
* <https://developer.android.com/guide/topics/ui/layout/recyclerview?hl=ko>
* <https://furang-note.tistory.com/26>
* <https://ddangeun.tistory.com/44>
* <https://lakue.tistory.com/18>