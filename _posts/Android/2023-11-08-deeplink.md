---
title: "[DeepLink/AppLink] ë§í¬ë¥¼ í†µí•´ ì•± í™”ë©´ ì—´ê¸°"
excerpt: "deepLink? appLink? ë­˜ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?"
categories:
  - Android
tag:
  - Android
  - DeepLink
  - AppLink

last_modified_at: 2023-11-08
toc: true
toc_sticky: true
search: true
---


## ğŸ‘©ğŸ»â€ğŸ’» [ë”¥ë§í¬?](https://help.dfinery.io/hc/ko/articles/360039757433-%EB%94%A5%EB%A7%81%ED%81%AC-Deeplink-URI%EC%8A%A4%ED%82%B4-%EC%9C%A0%EB%8B%88%EB%B2%84%EC%85%9C-%EB%A7%81%ED%81%AC-%EC%95%B1%EB%A7%81%ED%81%AC-%EA%B5%AC%EB%B6%84%EA%B3%BC-%EC%9D%B4%ED%95%B4)

ì›¹ì‚¬ì´íŠ¸ë¥¼ í•˜ë‚˜ì˜ ì£¼ì†Œê°€ ë‹¨ í•˜ë‚˜ì˜ ì›¹ì‚¬ì´íŠ¸ë§Œì„ í‘œì‹œí•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í•˜ë‚˜ì˜ ì£¼ì†Œê°€ ì•± ìƒì˜ í•˜ë‚˜ì˜ í™”ë©´ìœ¼ë¡œ í–¥í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥ì´ `ë”¥ë§í¬`ì´ë‹¤. 

## ğŸ‘©ğŸ»â€ğŸ’» ë”¥ë§í¬ì˜ ì„¸ê°€ì§€ ë°©ì‹
1. <span style = "background-color:#fff5b1">URL ìŠ¤í‚´ ë°©ì‹</span>
  - `url scheme`
    - `intent-filter`ì— `url scheme`ì„ ì„¤ì •í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë”¥ë§í¬ ë°©ì‹ì´ë‹¤.

2. <span style = "background-color:#fff5b1">ë„ë©”ì¸ ì£¼ì†Œ ë°©ì‹</span>
  - `AppLink`
    - `domain` ì£¼ì†Œë¥¼ í™œìš©í•œ ë”¥ë§í¬ ë°©ì‹ì´ë‹¤.
    - `Android` ì œê³µ
  - `UniversalLink` (í•´ë‹¹ ê¸€ì—ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.)
    - `domain` ì£¼ì†Œë¥¼ í™œìš©í•œ ë”¥ë§í¬ ë°©ì‹ì´ë‹¤.
    - `IOS` ì œê³µ

ìš°ì„  ì´ë²ˆ ì‹œê°„ì—ëŠ” URL ìŠ¤í‚´ì˜ ì‚¬ìš© ë°©ë²•ì— ëŒ€í•´ ë‹¤ë£¨ê³  ì´ëŸ¬í•œ ë°©ì‹ì˜ ë¬¸ì œì ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ê³ ì í•œë‹¤.

## ğŸ‘©ğŸ»â€ğŸ’» Url scheme

### intent-filterë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš°

> uri íŒ¨í„´ í˜•ì‹: {scheme}://{path}?{query}={value}

```kotlin
        <activity
            android:name=".home.MainActivity"
            android:screenOrientation="sensorLandscape"
            android:windowSoftInputMode="adjustPan"
            android:launchMode="singleInstance"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="app:" />
                <data android:host="www.cafepos.com" />
                <data android:pathPattern="/preorder" />
            </intent-filter>
        </activity>
```
ì´ë ‡ê²Œ `AndroidManifest.xml`ì— intent-filterë¥¼ ì„¤ì •í•´ ê°„ë‹¨íˆ url ìŠ¤í‚´ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.
ì•±ë§í¬ë¥¼ ë§Œë“¤ ë•Œë„ ìœ„ì™€ ê°™ì´ `intent-filter`ë¥¼ ì„¤ì •í•´ì¤˜ì•¼ í•˜ëŠ”ë° ê·¸ë•ŒëŠ” `scheme`ì„ `http`ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.

ì´ë ‡ê²Œ ì •ì˜í•œ url schemeì„ ì‚¬ìš©í•  ë•ŒëŠ”
```kotlin
            val preorderId = intent.getIntExtra("preorderId", -1)
            val uri = Uri.parse("app://www.cafepos.com/preorder?preorderId=$preorderId")
            val intent = Intent().also {
                it.data = uri
            }
            startActivity(intent)
```
intentì— dataë¥¼ í†µí•´ ë„˜ê²¨ì¤„ ìˆ˜ ìˆìœ¼ë©° ë„˜ê²¨ì§„ ë°ì´í„°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
```kotlin
    private fun handleIntent(intent: Intent) {
        val deepLinkData: Uri? = intent.data
        deepLinkData?.let {
            val preorderId = it.getQueryParameter("preorderId")?.toInt()
            checkPreorderAlarm(preorderId)
        }
    }
```

ì´ë ‡ê²Œ intent.dataì— urlë¥¼ ì„¤ì •í•˜ë©´ í•´ë‹¹ urlì— ëŒ€í•´ ë”¥ë§í¬ê°€ ì ìš©ëœë‹¤ê³  í•œë‹¤. ì´ë ‡ê²Œ `intent-filter`ë¥¼ í™œìš©í•œ deepLinkë¥¼ ì ìš©í•  ê²½ìš°, <span style = "background-color:#fff5b1">íŠ¹ì • fragmentë¡œ ì´ë™í•  ë•Œ ë¬´ì¡°ê±´ í•´ë‹¹ fragmentë¥¼ í¬í•¨í•˜ëŠ” activityë¥¼ ê±°ì³ì•¼ í•œë‹¤</span>ëŠ” ë²ˆê±°ë¡œì›€ì´ ì¡´ì¬í•œë‹¤.

ë”°ë¼ì„œ <span style = "background-color:#fff5b1">íŠ¹ì • fragmentì— ì§ì ‘ ë”¥ë§í¬ë¥¼ ì ìš©í•˜ëŠ” ë°©ì‹</span>ì´ ë°”ë¡œ `navigation-graph`ë¥¼ í™œìš©í•œ ë”¥ë§í¬ ë°©ì‹ì´ë‹¤.

### navigation-graphë¥¼ í™œìš©í•œ ë”¥ë§í¬
í•´ë‹¹ ê³¼ì •ì€ [ê³µì‹ë¬¸ì„œ](https://developer.android.com/guide/navigation/navigation-deep-link?hl=ko#handle)ì˜ `ì•”ì‹œì  ë”¥ë§í¬ ë§Œë“¤ê¸°` ë¶€ë¶„ì„ ì°¸ê³ í–ˆë‹¤.

1. ìš°ì„  navigation graphì— ë”¥ë§í¬ë¥¼ ì¶”ê°€í•œë‹¤.
  ```kotlin
      <fragment
          android:id="@+id/fragment_preorder"
          android:name="org.swm.att.home.preorder.PreorderFragment"
          android:label="@string/fragment_preorder"
          tools:layout="@layout/fragment_preorder">
          <argument
              android:name="preorderId"
              android:defaultValue="-1"
              app:argType="integer" />
          <deepLink
              android:id="@+id/deepLink1"
              app:uri="www.cafepos.com/preorder/{preorderId}" />
      </fragment>
  ```
-> `AndroidStudio` interfaceë¥¼ í™œìš©í•´ ì‰½ê²Œ ë”¥ë§í¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

2. ë”¥ë§í¬ê°€ ì •ì˜ëœ `navigation graph`ë¥¼ manifestì— ì„¤ì •í•´ì¤€ë‹¤.
  ```kotlin
    <fragment
        android:id="@+id/fragment_preorder"
        android:name="org.swm.att.home.preorder.PreorderFragment"
        android:label="@string/fragment_preorder"
        tools:layout="@layout/fragment_preorder">
        <argument
            android:name="preorderId"
            android:defaultValue="-1"
            app:argType="integer" />
        <deepLink
            android:id="@+id/deepLink4"
            app:uri="www.cafepos.com/preorder/{preorderId}" />
    </fragment>
  ```
  ì—¬ê¸°ì„œ `{preorderId}`ë¥¼ í†µí•´ ì „ë‹¬í•  ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

3. ë³¸ê²© ë”¥ë§í¬ ì‚¬ìš©!

  <span style = "background-color:#fff5b1">ì•± ë‚´ë¶€</span>ì—ì„œ urië¥¼ ì‹¤í–‰í•  ê±°ë¼ë©´ <span style = "background-color:#fff5b1">`navController`ë¥¼ í†µí•´ urië¥¼ ì „ë‹¬í•´ì¤Œ</span>ìœ¼ë¡œì¨ ë”¥ë§í¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

  ```kotlin
  val uri = Uri.parse("https://www.cafepos.com/preorder/$preorderId")
  findNavController().navigate(uri)
  ```

  ê·¸ë¦¬ê³  linkë¥¼ í†µí•´ ì „ë‹¬ëœ `preorderId`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ë½‘ì•„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  
  ```kotlin
     override fun onNewIntent(intent: Intent?) {
        super.onNewIntent(intent)
        Log.d("MainActivity", "onNewIntent: ${intent?.data?.lastPathSegment}")
        Log.d("MainActivity", "onNewIntent: ${intent?.data?.getQueryParameter("preorderId")}") // 'preorder?preorderId=$preorderId'ì¼ ê²½ìš°
        navController.handleDeepLink(intent ?: return)
    }
  ```

## ğŸ‘©ğŸ»â€ğŸ’» urlì„ í†µí•œ ë”¥ë§í¬ì˜ ë¬¸ì œì 

ê·¸ë ‡ë‹¤ë©´ ì´ë ‡ê²Œ `url`ì„ í™œìš©í•œ deeplinkë¥¼ ì‚¬ìš©í•  ë–„ ë¬¸ì œì ì´ ë­ê¸¸ë˜ ë„ë©”ì¸ ì£¼ì†Œë¥¼ í™œìš©í•œ ë”¥ë§í¬ê°€ ë‚˜ì™”ì„ê¹Œ?

1. urlì„ ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.
  - <span style = "background-color:#fff5b1">ì•± ìŠ¤í‚´ ê°’ì´ ì„œë¡œ ì¤‘ë³µë˜ëŠ” ê²½ìš°</span>ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì•± ê°œë°œìë“¤ì€ ì•± ìŠ¤í‚´ê°’ì´ ê³ ìœ í•œ ê°’ì¸ì§€ í™•ì¸í•  ë°©ë²•ì´ ì—†ë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ ì•±ì´ ê³ ì˜ì ìœ¼ë¡œ íŠ¹ì • ì•±ì˜ ì•± ìŠ¤í‚´ì„ ì‚¬ìš©í•´ë„ í•´ë‹¹ ì•±ì´ ì—´ë¦¬ë„ë¡ í•´ë„ ì´ë¥¼ ë§‰ì„ ë°©ë²•ì´ ì—†ë‹¤.

2. <span style = "background-color:#fff5b1">ì•±ì´ ì„¤ì¹˜ë˜ì–´ ìˆì„ ë•Œë§Œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.</span>

ë”°ë¼ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ <span style = "background-color:#fff5b1">ê°ì ê³ ìœ í•œ ê°’ì„ ê°€ì§„ ë„ë©”ì¸ ì£¼ì†Œë¥¼ í™œìš©í•œ ì•±ë§í¬/ìœ ë‹ˆë²„ì…œë§í¬ê°€ ë“±ì¥í•˜ê²Œ ë˜ì—ˆë‹¤.</span>

## ğŸ‘©ğŸ»â€ğŸ’» ì°¸ê³ 
- <https://help.dfinery.io/hc/ko/articles/360039757433-%EB%94%A5%EB%A7%81%ED%81%AC-Deeplink-URI%EC%8A%A4%ED%82%B4-%EC%9C%A0%EB%8B%88%EB%B2%84%EC%85%9C-%EB%A7%81%ED%81%AC-%EC%95%B1%EB%A7%81%ED%81%AC-%EA%B5%AC%EB%B6%84%EA%B3%BC-%EC%9D%B4%ED%95%B4>
- <https://developer.android.com/guide/navigation/navigation-deep-link?hl=ko#implicit>
- <https://developer.android.com/studio/write/app-link-indexing?hl=ko>
- <https://medium.com/prnd/%EB%94%A5%EB%A7%81%ED%81%AC%EC%9D%98-%EB%AA%A8%EB%93%A0%EA%B2%83-feat-app-link-universal-link-deferred-deeplink-61d6cf63a0a5>